<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
    <link rel="stylesheet" href="./survey.css">

</head>

<body>

    <div class="card col-sm-8" id="survey">
        <form action="">
            <div class="form-group">
                <label>1. Are you a lover or a fighter?(1 for all love and 5 all aggression)</label>
                <select class="form-control" id="questionOne">
                    <option>1</option>
                    <option>2</option>
                    <option>3</option>
                    <option>4</option>
                    <option>5</option>
                </select>
            </div>
            <div class="form-group">
                <label>2. How much HP do you need to thrive?
                    <br>(1 for no HP needed and 5 for I never want to die)</label>
                <select class="form-control" id="questionTwo">
                    <option>1</option>
                    <option>2</option>
                    <option>3</option>
                    <option>4</option>
                    <option>5</option>
                </select>
            </div>
            <div class="form-group">
                <label>3. How's your aim? (1 being track pad aim and 5 being aimbot)</label>
                <select class="form-control" id="questionThree">
                    <option>1</option>
                    <option>2</option>
                    <option>3</option>
                    <option>4</option>
                    <option>5</option>
                </select>
            </div>
            <div class="form-group">
                <label>4. Do you want to play a skill based character or whatever will get you wins?
                    <br>(1 for all skill, 5 for get SR at any cost)</label>
                <select class="form-control" id="questionFour">
                    <option>1</option>
                    <option>2</option>
                    <option>3</option>
                    <option>4</option>
                    <option>5</option>
                </select>
            </div>
            <div class="form-group">
                <label>5. How fast do you need to go? (1 for actual snail and 5 for break the sound barrier)</label>
                <select class="form-control" id="questionFive">
                    <option>1</option>
                    <option>2</option>
                    <option>3</option>
                    <option>4</option>
                    <option>5</option>
                </select>
            </div>
            <div class="form-group">
                <label>6. Do you want to protect your team or bully the opposing one?
                    <br>(1 for human shield and 5 for all out attack)</label>
                <select class="form-control" id="questionSix">
                    <option>1</option>
                    <option>2</option>
                    <option>3</option>
                    <option>4</option>
                    <option>5</option>
                </select>
            </div>
            <div class="form-group">
                <label>7. Is your usual play style selfish or selfless?
                    <br>(1 being extremely selfish and 5 being saint-like)</label>
                <select class="form-control" id="questionSeven">
                    <option>1</option>
                    <option>2</option>
                    <option>3</option>
                    <option>4</option>
                    <option>5</option>
                </select>
            </div>
            <div class="form-group">
                <label>8. How much anime do you watch? (1 for anime is lame and 5 for absolute weeb)</label>
                <select class="form-control" id="questionEight">
                    <option>1</option>
                    <option>2</option>
                    <option>3</option>
                    <option>4</option>
                    <option>5</option>
                </select>
            </div>
            <div class="form-group">
                <label>9. Do you want to have an obvious impact or be the unsung hero?
                    <br>(1 for Play of the Game every round and 5 for just here to help)</label>
                <select class="form-control" id="questionNine">
                    <option>1</option>
                    <option>2</option>
                    <option>3</option>
                    <option>4</option>
                    <option>5</option>
                </select>
            </div>
            <div class="form-group">
                <label>10. How much time are you willing to put in to master a hero?
                    <br>(1 for none at all and 5 for time is but a human construct)</label>
                <select class="form-control" id="questionTen">
                    <option>1</option>
                    <option>2</option>
                    <option>3</option>
                    <option>4</option>
                    <option>5</option>
                </select>
            </div>
            <br>
            <button type="button" class="btn btn-primary btn-lg mx-auto" data-toggle="modal" data-target="#result" id="runCalc">Submit Answers</button>
        </form>
    </div>

    <div class="modal fade" id="result" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalCenterTitle">Your Hero is...</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <img src="" alt="" id="resultImg">
                    <h2 id="heroName"></h2>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" id='modalBtn' data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>





    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>


    <script type="text/javascript">
        $('#runCalc').on('click', function (event) {
            event.preventDefault();

            var surveyAnswers = {
                qOne: $('#questionOne').val(),
                qTwo: $('#questionTwo').val(),
                qThree: $('#questionThree').val(),
                qFour: $('#questionFour').val(),
                qFive: $('#questionFive').val(),
                qSix: $('#questionSix').val(),
                qSeven: $('#questionSeven').val(),
                qEight: $('#questionEight').val(),
                qNine: $('#questionNine').val(),
                qTen: $('#questionTen').val(),
            };

            $.post('/api/heroes', surveyAnswers)
                .then(function (data) {
                    console.log(data);
                })

             $.ajax({ url: 'http://localhost:3000/api/result', method: 'GET' })
                .done(function (result) {
                    console.log(result.name);
                    console.log(result.img);

                    $('#heroName').text(result.name + '!');
                    $('#resultImg').attr('src', './images/' + result.img);
                    
                })


            
        });




    </script>
</body>

</html>